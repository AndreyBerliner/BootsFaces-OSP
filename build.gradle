/*
 * Copyright 2014-2016 Riccardo Massera (TheCoder4.Eu)
 *
 * This file is part of BootsFaces.
 * BootsFaces is free software: you can redistribute it and/or modify it under the terms of
 * the GNU General Public License as published by the Free Software Foundation, version 3 of the License.
 *
 * BootsFaces is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with BootsFaces.
 * If not, see http://www.gnu.org/licenses/gpl-3.0.html
 */

//This is the main Project file where all Configurations are handled
Properties props = new Properties()
props.load(new FileInputStream("${projectDir}/build.properties"))
ext.BootsFacesVersion = props['VERSION']
//Bootstrap
ext.BootstrapVersion = props['bootstrap.version']

ext.themes= props['bootswatch.theme'].replaceAll("\\s","").tokenize(',')
ext.BootswatchFullVersion = props['bootstrap.version']+props['bootswatch.subversion']
//ext.BootswatchFolder = "${projectDir}"+'/Bootswatch/bootswatch-'+BootswatchFullVersion.replace('+','-')

if(System.getProperty("BSF-THEME", "") != "") {
   ext.themes= System.getProperty("BSF-THEME", "").replaceAll("\\s","").tokenize(',')
   ext.allThemes= System.getProperty("BSF-THEME", "").replaceAll("\\s","").tokenize(',')
} else {
   ext.themes= props['bootswatch.theme'].replaceAll("\\s","").tokenize(',')
   ext.allThemes= ('default,'+props['bootswatch.theme']).replaceAll("\\s","").tokenize(',')
   println 'Themes('+themes.size+'):'+props['bootswatch.theme']
}

//jQuery options
ext.jqversion = props['jquery.version']
//Java options
ext.buildJava6 = ( ( props['java6']!=null) && props['java6'].toUpperCase().contains("YES") )
ext.buildJava7 = ( ( props['java7']!=null) && props['java7'].toUpperCase().contains("YES") )
ext.buildJava8 = ( ( props['java8']!=null) && props['java8'].toUpperCase().contains("YES") )

// Javac Compilation properties
ext.buildOptsJava6=["-g"]
ext.buildOptsJava7=["-g"]
ext.buildOptsJava8=["-g"]
if( props['java6opts']!=null) { ext.buildOptsJava6 = props['java6opts'].replaceAll("\\s","").tokenize(',') }
if( props['java7opts']!=null) { ext.buildOptsJava7 = props['java7opts'].replaceAll("\\s","").tokenize(',') }
if( props['java8opts']!=null) { ext.buildOptsJava8 = props['java8opts'].replaceAll("\\s","").tokenize(',') }

// Set the Artifact group ID
group = 'net.bootsfaces'
version = BootsFacesVersion

task showConfig << {
  println "Main Configurations."
  println "--------------------"
  println "BootsFacesVersion="+BootsFacesVersion
  println "BootstrapVersion="+BootstrapVersion
  println "BootswatchFullVersion="+BootswatchFullVersion
  println "allThemes="+allThemes
  println "jqversion="+jqversion
  println "buildJava6:"+buildJava6
  println "buildJava7:"+buildJava7
  println "buildJava8:"+buildJava8
  println "buildOptsJava6="+buildOptsJava6
  println "buildOptsJava7="+buildOptsJava7
  println "buildOptsJava8="+buildOptsJava8
  println "--------------------"
}

defaultTasks 'showConfig', ':java6:defaultJar', ':java7:jar', ':java8:jar'
